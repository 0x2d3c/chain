syntax = "proto3";
package tss.v1beta1;

import "gogoproto/gogo.proto";
import "google/api/annotations.proto";
import "tss/v1beta1/tss.proto";

option go_package = "github.com/bandprotocol/chain/v2/x/tss/types";

service Query {
  // Group queries group details
  rpc Group(QueryGroupRequest) returns (QueryGroupResponse) {
    option (google.api.http).get = "/tss/v1beta1/groups/{group_id}";
  }

  // Members queries all members in this group.
  rpc Members(QueryMembersRequest) returns (QueryMembersResponse) {
    option (google.api.http).get = "/tss/v1beta1/groups/{group_id}/members";
  }

  // IsGrantee queries grant of account on this granter.
  rpc IsGrantee(QueryIsGranteeRequest) returns (QueryIsGranteeResponse) {
    option (google.api.http).get =
        "/tss/v1beta1/grantee/{granter}/{grantee}";
  }
}

// QueryGroupRequest is the request type for the Query/Group RPC method
message QueryGroupRequest {
  // group_id defines the unique id of the group.
  uint64 group_id = 1;
}

// QueryGroupResponse is the response type for the Query/Group RPC method
message QueryGroupResponse {
  Group group = 1 [ (gogoproto.nullable) = false ];
  bytes dkg_context = 2 [ (gogoproto.customname) = "DKGContext" ];
  repeated Member members = 3 [ (gogoproto.nullable) = false ];
  repeated Round1Data all_round1_data = 4 [ (gogoproto.nullable) = false ];
}
  
// QueryMembersRequest is the request type for the Query/Members RPC method
message QueryMembersRequest {
    // group_id defines the unique id of the group.
    uint64 group_id = 1;
}

// QueryMembersResponse is the response type for the Query/Members RPC method
message QueryMembersResponse {
  repeated Member members = 1 [ (gogoproto.nullable) = false ];
}

// QueryIsSignerRequest is request type for the Query/IsSigner RPC method.
message QueryIsGranteeRequest {
  // Granter is a granter address
  string granter = 1;
  // Grantee is a candidate account
  string grantee = 2;
}

// QueryIsGranteeResponse is response type for the Query/IsSigner RPC method.
message QueryIsGranteeResponse {
  // IsGrantee is true if this account has been granted by granter
  bool is_grantee = 1;
}
